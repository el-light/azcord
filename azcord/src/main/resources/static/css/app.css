:root {
    --bg-primary: #36393f; /* Main background (chat area) */
    --bg-secondary: #2f3136; /* Sidebars, modals */
    --bg-tertiary: #202225; /* Server list, some borders */
    --bg-input: #40444b; /* Input fields */
    --text-primary: #dcddde; /* Main text */
    --text-muted: #b9bbbe; /* Timestamps, placeholder text */
    --text-link: #00a8fc;   /* Links */
    --accent: #5865f2;     /* Primary action buttons, highlights */
    --danger: #ed4245;     /* Delete, error states */
    --success: #43b581;    /* Success states */
    --interactive-normal: #b9bbbe; /* Icons, non-active channel names */
    --interactive-hover: #dcddde;  /* Hovered interactive elements */
    --interactive-active: #ffffff; /* Active channel, selected items */
    --bg-modifier-hover: rgba(79, 84, 92, 0.16); /* Hover on list items */
    --bg-modifier-active: rgba(79, 84, 92, 0.24); /* Active list items */
    --bg-modifier-selected: rgba(79, 84, 92, 0.08); /* Selected message background */
}
body { font-family: 'Inter', sans-serif; background-color: var(--bg-primary); color: var(--text-primary); }
::-webkit-scrollbar { width: 8px; height: 8px; }
::-webkit-scrollbar-thumb { background: var(--bg-tertiary); border-radius: 4px; }
::-webkit-scrollbar-track { background: var(--bg-secondary); }
.no-scrollbar::-webkit-scrollbar { display: none; }
.no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }

.server-icon { width: 48px; height: 48px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 600; font-size: 18px; color: #fff; background-color: var(--bg-secondary); cursor: pointer; transition: all 0.15s ease-out; overflow: hidden; flex-shrink: 0; }
.server-icon:hover { border-radius: 16px; background-color: var(--accent); }
.server-icon img { width: 100%; height: 100%; object-fit: cover; }
.server-icon.active { border-radius: 16px; background-color: var(--accent); box-shadow: 0 0 0 2px var(--bg-primary), 0 0 0 4px var(--accent); }
.server-icon.user-avatar-icon { margin-top: auto; }
.server-icon.user-avatar-icon:hover { background-color: var(--bg-input); }

.list-header { padding: 12px 8px 4px 16px; font-size: 12px; font-weight: 600; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.025em;}
.channel-item { padding: 6px 10px; margin: 1px 8px; border-radius: 4px; font-size: 15px; cursor: pointer; user-select: none; color: var(--text-muted); display: flex; align-items: center; gap: 8px; }
.channel-item:hover { background-color: var(--bg-modifier-hover); color: var(--interactive-hover); }
.channel-item.active { background-color: var(--bg-modifier-active); color: var(--interactive-active); font-weight: 500; }
.channel-item .icon { color: var(--text-muted); font-size: 18px; }
.channel-item.active .icon { color: var(--interactive-active); }
.channel-item .avatar { width: 24px; height: 24px; border-radius: 50%; flex-shrink: 0; display: flex; align-items: center; justify-content: center; font-size: 12px; color:white; }

.message-group { display: flex; gap: 16px; padding: 8px 16px 2px 16px; position: relative; margin-top: 12px; }
.message-group:hover { background-color: var(--bg-modifier-selected); }
.message-group .avatar { width: 40px; height: 40px; border-radius: 50%; object-fit: cover; cursor: pointer; flex-shrink: 0; display: flex; align-items: center; justify-content: center; font-weight: bold; color:white; }
.message-body { flex-grow: 1; padding-top: 2px; }
.message-header { display: flex; align-items: baseline; gap: 8px; font-size: 14px; margin-bottom: 2px; }
.message-header .name { font-weight: 500; color: var(--text-primary); cursor: pointer; }
.message-header .name:hover { text-decoration: underline; }
.message-header .timestamp { font-size: 12px; color: var(--text-muted); }
.message-content { white-space: pre-wrap; font-size: 15px; line-height: 1.375rem; color: var(--text-primary); word-wrap: break-word; }
.message-content a { color: var(--text-link); text-decoration: underline; }
.message-content img.attachment-preview { max-width: 320px; max-height: 280px; border-radius: 6px; cursor: pointer; margin-top: 6px; display: block; }
.message-content .file-attachment { display: inline-flex; align-items:center; gap: 6px; background-color: var(--bg-secondary); padding: 8px 12px; border-radius: 4px; margin-top: 6px; color: var(--text-link); text-decoration: none; font-size: 14px; border: 1px solid var(--bg-tertiary); }
.message-content .file-attachment:hover { border-color: var(--text-link); }
.replied-to-message { background-color: rgba(255,255,255,0.03); padding: 4px 8px; border-radius: 4px; margin-bottom: 4px; font-size: 0.8rem; color: var(--text-muted); border-left: 2px solid var(--accent); cursor:pointer; }
.replied-to-message:hover { background-color: rgba(255,255,255,0.05); }
.replied-to-message strong { color: var(--interactive-hover); }

.reaction-bar { display: flex; gap: 4px; margin-top: 6px; flex-wrap: wrap; }
.reaction-pill { display: flex; gap: 4px; align-items: center; padding: 3px 7px; border-radius: 16px; font-size: 13px; background-color: var(--bg-input); cursor: pointer; color: var(--text-muted); user-select: none; border: 1px solid transparent; transition: background-color 0.1s; }
.reaction-pill:hover { background-color: var(--bg-modifier-hover); border-color: var(--accent); }
.reaction-pill.reacted-by-user { background-color: rgba(88, 101, 242, 0.2); border-color: var(--accent); color: var(--accent); }
.reaction-pill .count { font-size: 0.8em; margin-left: 2px;}
.add-reaction-btn { font-size: 12px; padding: 3px 5px !important; background-color: var(--bg-input) !important; }

.message-group .hover-actions { position: absolute; right: 16px; top: -14px; opacity: 0; display: flex; gap: 4px; transition: opacity 0.1s ease-out; background-color: var(--bg-secondary); border: 1px solid var(--bg-tertiary); border-radius: 6px; padding: 4px; box-shadow: 0 2px 4px rgba(0,0,0,0.2); z-index:10; }
.message-group:hover .hover-actions { opacity: 1; }
.action-btn { width: 28px; height: 28px; border-radius: 4px; display: flex; align-items: center; justify-content: center; color: var(--interactive-normal); background-color: transparent; font-size: 18px; cursor: pointer; }
.action-btn:hover { color: var(--interactive-hover); background-color: var(--bg-modifier-hover); }

.upload-thumbnail { width: 64px; height: 64px; background-color: var(--bg-input); border-radius: 6px; display: flex; align-items: center; justify-content: center; font-size: 12px; position: relative; overflow: hidden; border: 1px dashed var(--text-muted); }
.upload-thumbnail img { width: 100%; height: 100%; object-fit: cover; }
.upload-thumbnail .remove-upload { position: absolute; top: -8px; right: -8px; width: 20px; height: 20px; border-radius: 50%; background-color: var(--danger); color: #fff; font-size: 14px; display: flex; align-items: center; justify-content: center; cursor: pointer; border: 2px solid var(--bg-secondary); }

.toast-notification { position: fixed; bottom: 20px; right: 20px; background-color: var(--bg-tertiary); color: var(--text-primary); padding: 12px 18px; border-radius: 6px; opacity: 0; animation: toastFadeInOut 4s forwards; box-shadow: 0 4px 12px rgba(0,0,0,0.3); z-index: 1000; }
@keyframes toastFadeInOut { 0%, 100% { opacity: 0; transform: translateY(10px); } 10%, 90% { opacity: 1; transform: translateY(0); } }

#profileModalContainer { position: fixed; inset: 0; display: none; align-items: center; justify-content: center; background-color: rgba(0,0,0,0.7); z-index: 50; }
#profileModalContainer.show { display: flex; }
.profile-card { background-color: var(--bg-secondary); padding: 24px; border-radius: 8px; width: 100%; max-width: 400px; display: flex; flex-direction: column; gap: 16px; }
.profile-card .avatar-container { display: flex; flex-direction: column; align-items: center; gap: 8px; }
.profile-card .profile-avatar-display { width: 100px; height: 100px; border-radius: 50%; object-fit: cover; background-color: var(--accent); display: flex; align-items: center; justify-content: center; font-size: 48px; color: white; cursor: pointer; border: 3px solid var(--bg-tertiary); }
.profile-card input[type="text"], .profile-card textarea { background-color: var(--bg-input); padding: 10px 12px; border-radius: 4px; color: var(--text-primary); width: 100%; border: 1px solid var(--bg-tertiary); }
.profile-card textarea { min-height: 80px; resize: vertical; }
.profile-card .form-actions { display: flex; justify-content: flex-end; gap: 8px; }
.profile-card .form-actions button { padding: 8px 16px; border-radius: 4px; font-weight: 500; }
.profile-card .form-actions .save-btn { background-color: var(--accent); color: #fff; }
.profile-card .form-actions .cancel-btn { background-color: transparent; color: var(--text-muted); border: 1px solid var(--text-muted); }

.emoji-picker { position: absolute; background-color: var(--bg-secondary); border: 1px solid var(--bg-tertiary); border-radius: 8px; padding: 8px; display: flex; flex-wrap: wrap; gap: 6px; box-shadow: 0 4px 12px rgba(0,0,0,0.3); z-index: 20; width: auto; max-width: 200px; }
.emoji-picker span { font-size: 20px; cursor: pointer; padding: 4px; border-radius: 4px; }
.emoji-picker span:hover { background-color: var(--bg-modifier-hover); }

.avatar-box{
  position:fixed;inset:0;background:rgba(0,0,0,.8);
  display:flex;align-items:center;justify-content:center;
  z-index:100;
}
.avatar-box img{max-width:80vw;max-height:80vh;border-radius:8px;}

.profile-pop{
  position:fixed;z-index:90;background:var(--bg-secondary);padding:16px;
  border-radius:8px;width:240px;
}
.profile-pop img{width:64px;height:64px;border-radius:50%;cursor:pointer;}
.profile-pop h4{font-size:16px;font-weight:700;margin-top:6px;}
.profile-pop p{font-size:13px;color:#b9bbbe;margin-top:2px;}

/* Friends UI styles */
.friends { box-shadow: -2px 0 5px rgba(0,0,0,0.2); }
.dm-row { display: flex; align-items: center; gap: 10px; padding: 8px; border-radius: 4px; margin-bottom: 4px; transition: background-color 0.2s; }
.dm-row:hover { background-color: var(--bg-modifier-hover); }
.dm-row img.avatar { width: 32px; height: 32px; border-radius: 50%; object-fit: cover; }
.dm-row span { flex-grow: 1; color: var(--text-primary); font-size: 14px; }
.dm-row button { font-size: 12px; padding: 4px 8px; border-radius: 4px; }
.dm-row button.btn { background-color: var(--accent); color: white; }
.dm-row button.secondary { background-color: transparent; border: 1px solid var(--text-muted); color: var(--text-muted); }

/* Typing indicator styles */
.typing-indicator { font-size: 12px; color: #b9bbbe; padding-left: 16px; padding-top: 2px; }
  
  /* Modal & panel helpers */
  .modal{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;background-color:rgba(0,0,0,.6);z-index:60}
  .modal-card{background-color:var(--bg-secondary);padding:1.5rem;border-radius:0.5rem;width:100%;display:flex;flex-direction:column;gap:1rem}
  .modal-title{font-size:1.25rem;font-weight:600;color:#fff}
  .modal-actions{display:flex;justify-content:flex-end;gap:0.5rem;border-top:1px solid var(--bg-tertiary);padding-top:1rem}
  
  .side-panel{position:fixed;top:0;right:0;height:100%;width:18rem;background:var(--bg-secondary);border-left:1px solid var(--bg-tertiary);z-index:50;display:flex;flex-direction:column}
  
  /* Scrollbars */
  ::-webkit-scrollbar{width:8px;height:8px}
  ::-webkit-scrollbar-thumb{background:var(--bg-tertiary);border-radius:4px}
  ::-webkit-scrollbar-track{background:var(--bg-secondary)}
  .no-scrollbar::-webkit-scrollbar{display:none}
  .no-scrollbar{-ms-overflow-style:none;scrollbar-width:none}

/* ------- modal scaffold ------- */
.modal { position:fixed; inset:0; background:rgba(0,0,0,.7); display:flex; align-items:center;
    justify-content:center; z-index:60; }
.modal-box { width:100%; max-width:480px; background:var(--bg-secondary); border-radius:8px;
        padding:24px; box-shadow:0 4px 20px rgba(0,0,0,.4); }
.modal-title { font-size:20px; font-weight:600; margin-bottom:12px; color:var(--text-primary); }
.section-h   { font-size:14px; color:var(--text-muted); margin-bottom:6px; }
.input       { background:var(--bg-input); color:var(--text-primary); padding:8px 10px;
          border-radius:4px; border:1px solid var(--bg-tertiary); }
.btn         { padding:6px 12px; border-radius:4px; background:var(--bg-input);
          color:var(--text-primary); }
.btn-primary { background:var(--accent); color:#fff; }
.btn-danger  { background:var(--danger); color:#fff; }

/* coloured role badge */
.role-badge   { padding:2px 6px; border-radius:12px; font-size:12px; color:#fff; display:inline-block; }

/* lightweight table look for permission matrix */
.permissions-grid { display:grid; grid-template-columns:repeat(auto-fill,minmax(110px,1fr)); gap:6px; }
.permissions-grid label{ display:flex; gap:4px; align-items:center; font-size:12px; }


/* channels & dms rectangles */
.channel-item, .list-header {
    border-radius: 6px;
    padding: 4px 8px;
}
.channel-item.active,
.channel-item:hover {
    background: var(--accent-muted, #404eed);
    color:#fff;
}

/* role badge colour pill */
.role-badge {
    border-radius: 12px;
    padding:2px 8px;
    font-weight:600;
    font-size:12px;
}

/* modal */
.modal-box {
    border-radius: 10px;
}

/* buttons */
.btn, .btn-primary {
    border-radius:6px;
}
